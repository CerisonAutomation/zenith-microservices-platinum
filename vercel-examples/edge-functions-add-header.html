<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Adding response headers at the edge - Vercel Examples</title><meta name="description" content="How to add response headers in a middleware"/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/4ad045051db015ac.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4ad045051db015ac.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-ac88a2a245aea9ab.js" defer=""></script><script src="/_next/static/chunks/main-86f63e4214b45595.js" defer=""></script><script src="/_next/static/chunks/pages/_app-3a262a903166559d.js" defer=""></script><script src="/_next/static/chunks/pages/index-0f7814730ae58032.js" defer=""></script><script src="/_next/static/T86nStA814YWUQ4H4NhYR/_buildManifest.js" defer=""></script><script src="/_next/static/T86nStA814YWUQ4H4NhYR/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="mx-auto h-screen flex flex-col"><nav class="border-b border-gray-200 py-5 relative z-20 bg-background shadow-[0_0_15px_0_rgb(0,0,0,0.1)]"><div class="flex items-center lg:px-6 px-8 mx-auto max-w-7xl px-14"><div class="flex flex-row items-center"><a class="text-link hover:text-link-light transition-colors no-underline [&amp;_code]:text-link [&amp;_code]:hover:text-link-light [&amp;_code]:transition-colors" href="/"><span><svg height="26" viewBox="0 0 75 65" fill="#000"><title>Vercel Logo</title><path d="M37.59.25l36.95 64H.64l36.95-64z"></path></svg></span></a><ul class="flex items-center content-center"><li class="ml-2 text-gray-200"><svg viewBox="0 0 24 24" width="32" height="32" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" fill="none" shape-rendering="geometricPrecision"><path d="M16.88 3.549L7.12 20.451"></path></svg></li><li class="font-medium" style="letter-spacing:.01px"><a class="text-link hover:text-link-light transition-colors no-underline [&amp;_code]:text-link [&amp;_code]:hover:text-link-light [&amp;_code]:transition-colors text-accents-6 no-underline transition-colors duration-200 hover:text-accents-8 cursor-pointer" target="_blank" rel="noreferrer" href="https://github.com/vercel/examples/tree/main/edge-middleware/add-header">Vercel Examples / edge-middleware / add-header</a></li></ul></div><div class="flex-1 justify-end hidden md:flex"><nav class="flex-row inline-flex items-center"><span class="ml-2 h-full flex items-center cursor-not-allowed text-accents-5"><a data-variant="ghost" class="relative inline-flex items-center justify-center cursor pointer no-underline px-3.5 rounded-md font-medium outline-0 select-none align-middle whitespace-nowrap transition-colors ease-in duration-200 text-success hover:bg-[rgba(0,68,255,0.06)] h-10 leading-10 text-[15px]" href="https://github.com/vercel/examples/tree/main" target="_blank" rel="noreferrer">More Examples â†’</a></span><span class="ml-2 h-full flex items-center cursor-not-allowed text-accents-5"><a data-variant="primary" class="relative inline-flex items-center justify-center cursor pointer no-underline px-3.5 rounded-md font-medium outline-0 select-none align-middle whitespace-nowrap transition-colors ease-in duration-200 border border-solid text-background bg-success border-success-dark hover:bg-success/90 shadow-[0_5px_10px_rgb(0,68,255,0.12)] h-10 leading-10 text-[15px]" href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fvercel%2Fexamples%2Ftree%2Fmain%2Fedge-middleware%2Fadd-header&amp;project-name=edge-middleware%2Fadd-header&amp;repository-name=edge-middleware%2Fadd-header" target="_blank" rel="noreferrer">Clone &amp; Deploy</a></span></nav></div></div></nav><div class="px-8 bg-accents-0"><main class="w-full max-w-3xl mx-auto py-16"><section class="flex flex-col gap-6"><h1 class="text-5xl font-bold tracking-tight">Adding headers at the edge</h1><p class="text-base font-normal">In some cases we might want to add or modify the headers from an incoming request for different reasons, AB testing, personalization, analytics, etc. To have access to the tenative response we can call<!-- --> <code class="text-code text-base whitespace-pre-wrap before:content-[&quot;`&quot;] after:content-[&quot;`&quot;]">NextResponse.next()</code> and then modify its headers:</p><pre class="border-accents-2 border rounded-md bg-white overflow-x-auto p-6 transition-all">// Store the response so we can modify its headers
const response = NextResponse.next()

// Set custom header
response.headers.set(
  &quot;x-modified-edge&quot;,
  &quot;true&quot;
)

// Return response
return response</pre></section><hr class="border-t border-accents-2 my-6"/><section class="flex flex-col items-center gap-3"><p class="text-base font-normal">Open the network tab in devtools to see the response headers</p><pre class="bg-black text-white font-mono text-left py-2 px-4 rounded-lg text-sm leading-6"><p><strong>x-modified-edge: </strong>true</p></pre></section></main></div><footer class="py-10 w-full mt-auto border-t flex items-center justify-center bg-accents-1 z-20"><span class="text-primary">Created by</span><a href="https://vercel.com" aria-label="Vercel.com Link" target="_blank" rel="noreferrer" class="text-black"><svg width="89" height="20" viewBox="0 0 89 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="inline-block h-6 ml-3 text-primary" alt="Vercel.com Logo"><path d="M11.5625 0L23.125 20H0L11.5625 0Z" fill="currentColor"></path><path d="M49.875 10.625C49.875 7.40625 47.5 5.15625 44.0937 5.15625C40.6875 5.15625 38.3125 7.40625 38.3125 10.625C38.3125 13.7812 40.875 16.0937 44.4062 16.0937C46.3438 16.0937 48.0938 15.375 49.2188 14.0625L47.0938 12.8437C46.4375 13.5 45.4688 13.9062 44.4062 13.9062C42.8438 13.9062 41.5 13.0625 41.0312 11.7812L40.9375 11.5625H49.7812C49.8438 11.25 49.875 10.9375 49.875 10.625ZM40.9062 9.6875L40.9688 9.5C41.375 8.15625 42.5625 7.34375 44.0625 7.34375C45.5938 7.34375 46.75 8.15625 47.1562 9.5L47.2188 9.6875H40.9062Z" fill="currentColor"></path><path d="M83.5313 10.625C83.5313 7.40625 81.1563 5.15625 77.75 5.15625C74.3438 5.15625 71.9688 7.40625 71.9688 10.625C71.9688 13.7812 74.5313 16.0937 78.0625 16.0937C80 16.0937 81.75 15.375 82.875 14.0625L80.75 12.8437C80.0938 13.5 79.125 13.9062 78.0625 13.9062C76.5 13.9062 75.1563 13.0625 74.6875 11.7812L74.5938 11.5625H83.4375C83.5 11.25 83.5313 10.9375 83.5313 10.625ZM74.5625 9.6875L74.625 9.5C75.0313 8.15625 76.2188 7.34375 77.7188 7.34375C79.25 7.34375 80.4063 8.15625 80.8125 9.5L80.875 9.6875H74.5625Z" fill="currentColor"></path><path d="M68.5313 8.84374L70.6563 7.62499C69.6563 6.06249 67.875 5.18749 65.7188 5.18749C62.3125 5.18749 59.9375 7.43749 59.9375 10.6562C59.9375 13.875 62.3125 16.125 65.7188 16.125C67.875 16.125 69.6563 15.25 70.6563 13.6875L68.5313 12.4687C67.9688 13.4062 66.9688 13.9375 65.7188 13.9375C63.75 13.9375 62.4375 12.625 62.4375 10.6562C62.4375 8.68749 63.75 7.37499 65.7188 7.37499C66.9375 7.37499 67.9688 7.90624 68.5313 8.84374Z" fill="currentColor"></path><path d="M88.2188 1.75H85.7188V15.8125H88.2188V1.75Z" fill="currentColor"></path><path d="M40.1563 1.75H37.2813L31.7813 11.25L26.2813 1.75H23.375L31.7813 16.25L40.1563 1.75Z" fill="currentColor"></path><path d="M57.8438 8.0625C58.125 8.0625 58.4062 8.09375 58.6875 8.15625V5.5C56.5625 5.5625 54.5625 6.75 54.5625 8.21875V5.5H52.0625V15.8125H54.5625V11.3437C54.5625 9.40625 55.9062 8.0625 57.8438 8.0625Z" fill="currentColor"></path></svg></a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/","query":{},"buildId":"T86nStA814YWUQ4H4NhYR","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>